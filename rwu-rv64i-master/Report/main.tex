\documentclass[12pt,a4paper]{report}

% -------------- Packages --------------
\usepackage[a4paper, margin=1in]{geometry}
\usepackage{setspace}
\usepackage{lmodern}
\usepackage[hidelinks]{hyperref}
\usepackage{graphicx}        % correct package (graphics does not accept draft=false option)
\setkeys{Gin}{draft=false}   % ensure images are not in draft mode
\usepackage{float}
\usepackage{amsmath,amssymb}
\usepackage{cleveref}
\usepackage{subcaption}
\usepackage{minted}        % requires -shell-escape
\usepackage{biblatex}      % modern bibliography
\usepackage{booktabs}
\usepackage{listings}
\usepackage{xcolor}
\usepackage[T1]{fontenc}
\usepackage{microtype} 
\usepackage{url}
\usepackage{tabularx}

\lstdefinelanguage{MakefileCustom}{
  morekeywords={CC,AS,OBJCOPY,SIZE,OBJDUMP,ARCH,COMMON,CFLAGS,ASFLAGS,LDFLAGS,CPFLAGS,ALL_CS,NUM_SELECTED,SEL_DIR,APP,CRT_OBJ,C_OBJ,ELF,MAP,VHEX,BIN,LST,SIMDIR,SIMMEM1,SIMMEM2,DEFAULT_GOAL},
  morecomment=[l]{\#},
  sensitive=true,
  morestring=[b]"
}



\lstset{
  language=MakefileCustom,
  basicstyle=\ttfamily\small,
  numbers=left,
  numberstyle=\tiny,
  stepnumber=1,
  numbersep=6pt,
  showstringspaces=false,
  keepspaces=true,        % preserve tabs and spaces (important for Makefile)
  tabsize=4,              % display tab width (use 4 for Makefile viewing)
  breaklines=true,
  breakatwhitespace=true,
  columns=fullflexible,
  postbreak=\mbox{\textcolor{gray}{$\hookrightarrow$}\space}
}

\addbibresource{bibliography.bib}

\graphicspath{{figures/}}

% -------------- Styling --------------
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyfoot[C]{\thepage}
\setstretch{1.5}

% Optional: custom styles / macros
\usepackage{thesis} % loads thesis.sty

% Uncomment to compile only some chapters while writing:
% \includeonly{chapters/01_introduction,chapters/04_toolchain_implementation}

% -------------- Document --------------
\begin{document}

% front matter (title page, declaration, abstract)
\input{frontmatter/titlepage.tex}
\pagenumbering{roman}
\input{frontmatter/declaration.tex}
\input{frontmatter/abstract.tex}
\input{frontmatter/acknowledgements.tex}
\tableofcontents
\listoffigures
\listoftables
\clearpage

% main chapters
\pagenumbering{arabic}
\include{chapters/01_introduction}
\include{chapters/02_background}
\include{chapters/03_system_overview}
\include{chapters/04_toolchain_implementation}
\include{chapters/05_eclipse_integration_and_testing}
\include{chapters/06_results_and_analysis}
\include{chapters/07_conclusion_future_work}

% appendices
\appendix
\include{appendices/toolchain_source}

% bibliography
\nocite{*}
\printbibliography
\end{document}
